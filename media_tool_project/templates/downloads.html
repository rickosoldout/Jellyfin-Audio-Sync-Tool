<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Downloads</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script>
    // Reload the page every 2 seconds to update download progress (can improve with AJAX later)
    setInterval(() => location.reload(), 2000);
  </script>
</head>
<body class="bg-light">
  <div class="container py-4">
    <h1>Downloads</h1>
    <ul class="list-group">
      {% for id, d in downloads.items() %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ d.name }}
          <div>
            {% if d.status == "downloading" %}
              <span>Downloading: {{ d.progress }}%</span>
            {% elif d.status == "complete" %}
              <span class="text-success">Complete</span>
              <button onclick="alert('Injecting {{ d.name }} (simulate)')" class="btn btn-sm btn-primary ms-2">Inject</button>
            {% endif %}
          </div>
        </li>
      {% endfor %}
    </ul>
    <a href="/" class="btn btn-link mt-3">Back to Home</a>
  </div>
</body>
</html>
